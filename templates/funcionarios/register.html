{% extends 'base.html' %}
{% block title %}Registrar Funcionário{% endblock %}
{% block content %}

<h2 class="mb-4">Registro de Funcionário</h2>
<form method="POST">
    <div class="mb-3">
        <label for="nome" class="form-label">Nome Completo</label>
        <input type="text" class="form-control" id="nome" name="nome" required>
    </div>
    
    <div class="mb-3">
        <label for="data_nascimento" class="form-label">Data de Nascimento</label>
        <input type="date" class="form-control" id="data_nascimento" name="data_nascimento" required>
    </div>
    
    <div class="mb-3">
        <label for="cpf" class="form-label">CPF</label>
        <input type="text" class="form-control" id="cpf" name="cpf" required maxlength="14" placeholder="000.000.000-00">
    </div>

    <div class="mb-3">
        <label for="telefone" class="form-label">Telefone</label>
        <input type="tel" class="form-control" id="telefone" name="telefone" placeholder="(xx) 9xxxx-xxxx" required>
    </div>

    <div class="mb-3">
        <label for="rua" class="form-label">Rua / Logradouro</label>
        <input type="text" class="form-control" id="rua" name="rua" required>
    </div>

    <div class="row">
        <div class="col-md-4 mb-3">
            <label for="numero" class="form-label">Número</label>
            <input type="text" class="form-control" id="numero" name="numero" required>
        </div>
        <div class="col-md-8 mb-3">
            <label for="complemento" class="form-label">Complemento (se tiver)</label>
            <input type="text" class="form-control" id="complemento" name="complemento">
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="bairro" class="form-label">Bairro</label>
            <input type="text" class="form-control" id="bairro" name="bairro" required>
        </div>
        <div class="col-md-6 mb-3">
            <label for="cidade_uf" class="form-label">Cidade / UF</label>
            <input type="text" class="form-control" id="cidade_uf" name="cidade_uf" required>
        </div>
    </div>

    <div class="mb-3">
        <label for="cargo" class="form-label">Cargo</label>
        <input type="text" class="form-control" id="cargo" name="cargo" required>
    </div>

    <div class="mb-3">
        <label for="salario_mensal" class="form-label">Salário Mensal (R$ - Bruto)</label>
        <input type="number" class="form-control" id="salario_mensal" name="salario_mensal" required>
    </div>
    <hr>
    <h4>Dados de login</h4>
    <div class="mb-3">
        <label for="email" class="form-label">E-mail</label>
        <input type="email" class="form-control" id="email" name="email" required>
    </div>

    <div class="mb-3">
        <label for="senha" class="form-label">Senha</label>
        <input type="password" class="form-control" id="senha" name="senha" required>
    </div>

    <div class="mb-3">
        <label for="tipo" class="form-label">Tipo de Conta</label>
        <select class="form-select" id="tipo" name="tipo" onchange="mostrarChave()">
            <option value="funcionario">Funcionário</option>
            <option value="admin">Administrador</option>
        </select>
    </div>

    <div class="mb-3" id="chaveContainer" style="display: none;">
        <label for="chave_admin" class="form-label">Chave de Autenticação</label>
        <input type="text" class="form-control" id="chave_admin" name="chave_admin">
    </div>

    <button type="submit" class="btn btn-primary">Registrar</button>
    <a href= "{{ url_for('auth.login') }}" class="btn btn-link">Já tenho cadastro</a>
</form>

<script>
    function mostrarChave() {
        const tipo = document.getElementById('tipo').value;
        const chaveContainer = document.getElementById('chaveContainer');
        if (tipo === 'admin') {
            chaveContainer.style.display = 'block';
        } else {
            chaveContainer.style.display = 'none';
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        const tipo = document.getElementById('tipo');
        mostrarChave();
        if (tipo) {
            tipo.addEventListener('change', mostrarChave);
        }
    });
</script>

{% endblock %}